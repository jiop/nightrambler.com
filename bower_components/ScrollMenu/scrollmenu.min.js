/*
    ScrollMenu v 1.0.0
    Author: Sudhanshu Yadav
    Copyright (c) 2015 to Sudhanshu Yadav - ignitersworld.com , released under the MIT license.
    Demo on: http://ignitersworld.com/lab/scrollmenu/
*/

!function(n,o,t,e){function r(o,e){var r=this;o&&n(o)[0]instanceof Element||(e=o,o=t.body),e=e||{},e=r.options=n.extend({},h,e),r.container=n(o),r.sections=r.container.find(r.options.sectionClass),r._vertical="vertical"==e.menuType,r._sectionTops=[],r._sectionHeights=[],r._scrollAnchorPos=[]}n.single=function(){var o=n({});return function(n){return o[0]=n,o}}();var i=n(t),l=n(o),s=n("body"),c=function(){},a=function(){var n=t.createElement("div");n.style.visibility="hidden",n.style.width="100px",n.style.msOverflowStyle="scrollbar",t.body.appendChild(n);var o=n.offsetWidth;n.style.overflow="scroll";var e=t.createElement("div");e.style.width="100%",n.appendChild(e);var r=e.offsetWidth;return n.parentNode.removeChild(n),o-r}();!function(){var n={};this.tmpl=function o(e,r){var i=/\W/.test(e)?new Function("obj","obj = obj || {}; var p=[],print=function(){p.push.apply(p,arguments);};p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',obj.$1 || \"\",'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');return p.join('');"):n[e]=n[e]||o(t.getElementById(e).innerHTML);return r?i(r):i}}();var h={sectionClass:"section",menuType:"vertical",appendTo:null,animateOnScroll:!0,nativeScroll:!0,scrollbarVisible:!1,onhover:c,onhoverOut:c,onscrollToSection:c,menuMod:c,anchorSetup:[],animationDuration:600,scrollAnchorSpacing:10};r.prototype={constructor:r,_init:function(){var t=this,e=t.options,r=e.nativeScroll,c=t.container;t._prepareMenu();var a=t._contentWrap;return r&&a.on("scroll",function(){t._onScroll()}),t._setScrollAchorSize(),l.on("resize.scrollMenu",function(){t.resizeTimeout&&o.clearTimeout(t.resizeTimeout),t.resizeTimeout=setTimeout(function(){r&&(c.height(""),a.add(c).height(c.is("body,html")?l.height():c.height())),t._setScrollAchorSize()},200)}),t.scrollMenuWrap.on("mousedown touchstart",function(o){o.preventDefault();var r=n.single(o.target),l="touchstart"==o.type?"touchmove":"mousemove",c="touchstart"==o.type?"touchend":"mouseup";if(r.is(".scroll-handle")){s.addClass("scroll-menu-dragging"),t._setAnchorPos();var a=t._vertical?"clientY":"clientX",h=o[a]||o.originalEvent.touches[0][a],p=t.scrollTop(),u=t._inBoundry(h);i.on(l+".scrollMenu",function(n){n.preventDefault();var o=n[a]||n.originalEvent.touches[0][a],r=t._inBoundry(o);r!==!1&&t.scrollTo(p+(o-h-(r-u)*e.scrollAnchorSpacing)/t._sizeFactor,!1)}),i.one(c,function(){i.off(l+".scrollMenu"),s.removeClass("scroll-menu-dragging")})}else{var d=t.scrollAnchors.index(r.closest(".scroll-anchor"));if(-1==d)return;setTimeout(function(){t.scrollToSection(d)},0)}}),t.scrollAnchors.hover(function(o){var r=(n.single(this),t.scrollAnchors.index(this)),i=e.anchorSetup,l=i[r]&&i[r].onhover||e.onhover;n.single(this).find(".scroll-menu-content").addClass("hovered"),l.call(this,o,t.getIndexData(r))},function(o){var r=(n.single(this),t.scrollAnchors.index(this)),i=e.anchorSetup,l=i[r]&&i[r].onhoverOut||e.onhoverOut;n.single(this).find(".scroll-menu-content").removeClass("hovered"),l.call(this,o,t.getIndexData(r))}),r&&t._onScroll(),t._setScrollAchorSize(),t},_prepareMenu:function(){var o=this,t=o.container,e=o.options,r=e.scrollbarVisible;if(t.addClass("scroller-container"),e.nativeScroll){var i=r?"width:100%":"padding-right:10px; right:-"+(10+a)+"px";t.wrapInner('<div class="content-inner-wrapper"></div>').wrapInner('<div class="content-wrapper" style="'+i+'"></div>');var s=o._contentWrap=t.find(".content-wrapper");s.add(t).height(t.is("body")?l.height():t.height()),s.css("position","absolute")}for(var c=e.anchorSetup,h=['<div class="scroll-menu-wrapper '+o.options.menuType+" "+(e.className||"")+'">'],p=0,u=o.sections.length;u>p;p++){var d=c[p]||{},v=d.template||e.template||"",f=p==u-1?"":'style="margin-'+(o._vertical?"bottom":"right")+":"+e.scrollAnchorSpacing+'px"';v=v&&'<div class="scroll-menu-content <%= className %>" style="'+("horizontal-menu"!=o.options.menuType&&"background-color : <%= backgroundColor %>")+'">'+v+"</div>",scrollAnchorTempl='<div class="scroll-anchor" '+f+">"+v+'<div class="scroll-handle-wrap" style="background-color : <%= backgroundColor %>"><div class="scroll-handle"></div></div></div>',h.push(tmpl(scrollAnchorTempl,d))}h.push("</div>");var g=e.appendTo?n(e.appendTo):t;g.append(h.join(""));var m=o.scrollMenuWrap=g.find(".scroll-menu-wrapper");if(o.scrollAnchors=m.find(".scroll-anchor"),o.scrollHandles=m.find(".scroll-handle"),n.each(o.scrollAnchors,function(n){var t=c[n]&&c[n].menuMod||e.menuMod;t.call(this,o.getIndexData(n))}),r){m.css("padding-right",parseInt(m.css("padding-right"),10)+a+"px")}},scrollTop:function(){return this._contentWrap.scrollTop()},_scrollHeight:function(){var n=this;return(n.options.nativeScroll?n._contentWrap:n.container)[0].scrollHeight},_setAnchorPos:function(){var o=this,t=l.scrollTop(),e=l.scrollLeft(),r=o._vertical;o.scrollAnchors.each(function(i){var l=n(this),s=l.offset(),c=s.top-t,a=s.left-e;o._scrollAnchorPos[i]={min:r?c:a,max:r?c+l.height():a+l.width()}})},_inBoundry:function(n){for(var o,t=this._scrollAnchorPos,e=0,r=t.length;r>e;e++)if(o=t[e],n>=o.min&&n<=o.max)return e;return!1},getIndexData:function(n){var o=this;return{index:n,anchor:o.scrollAnchors[n],section:o.sections[n],anchorOptions:o.options.anchorSetup[n]}},_scrollTo:function(n,o,t){this._contentWrap.animate({scrollTop:n+"px"},o,t)},scrollTo:function(n,o,t){var r=this,i=r.options;t=t||("function"==typeof o?o:c),o=o==e||"function"==typeof o?!0:o;var l=i.animateOnScroll&&o?i.animationDuration:0;r._scrollTo(n,l,t)},scrollToSection:function(n,o,t){t=t||("function"==typeof o?o:c);var r=this,i=isNaN(n)?r.sections.index(r.sections.filter(n)):n,l=r.options,s=l.anchorSetup,a=r._sectionTops[i];a!=e&&r.scrollTo(a,o,function(){var n=r.getIndexData(i);(s[i]&&s[i].onscrollToSection||l.onscrollToSection)(n),t(n)})},_onScroll:function(){var n=this;n._updateScrollAnchors(n.scrollTop())},_setScrollAchorSize:function(){var o=this,t=o.options,e=o.container,r=o._vertical,i=o.scrollMenuWrap,s=e.is("body,html")?l.height():e.height(),c=e.width(),a=r?Math.min(s,i.innerHeight()):Math.min(c,i.innerWidth()||1e6);100>a&&(a=r?s:c),o.scrollHeight=o._scrollHeight();var h=parseInt(i.css(r?"padding-top":"padding-left"),10)||0,p=parseInt(i.css(r?"padding-bottom":"padding-right"),10)||0,u=(a-h-p-t.scrollAnchorSpacing*(o.scrollHandles.length-1))*s/o.scrollHeight;return o.scrollHandles[r?"height":"width"](u),o._sizeFactor=u/s,o.sections.each(function(t){var e=n.single(this),i=e.innerHeight(),l=e.position().top;o._sectionHeights[t]=i,o._sectionTops[t]=l,n.single(o.scrollAnchors[t])[r?"height":"width"](i*u/s)}),o},_updateScrollAnchors:function(o){var t=this;t.scrollAnchors.each(function(e){var r=n.single(t.scrollHandles[e]),i=100*(o-t._sectionTops[e])/t._sectionHeights[e];r.css(t._vertical?"top":"left",i+"%")})},refresh:function(){this._setScrollAchorSize()},destroy:function(){var n=this;n.scrollMenuWrap.remove(),n._contentWrap&&n._contentWrap.children().children().unwrap().unwrap(),n.container.removeClass("scroller-container"),l.off("resize.scrollMenu")}};var p=this;p.ScrollMenu=function(n,o){return new r(n,o)._init()},p.ScrollMenu.defaults=h}(jQuery,window,document);